<!DOCTYPE HTML><html dir="ltr" lang="en-us"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui"><title>AngularJS: Criando filtros customizados e além // Sinisha Stojchevski</title><link rel="manifest" href="/manifest.json"> <!-- Begin Jekyll SEO tag v2.6.1 --><title>AngularJS: Criando filtros customizados e além | Sinisha Stojchevski</title><meta name="generator" content="Jekyll v3.8.7" /><meta property="og:title" content="AngularJS: Criando filtros customizados e além" /><meta name="author" content="Sinisha Stojchevski" /><meta property="og:locale" content="en_US" /><meta name="description" content="Filtros são mal compreendidos no universo AngularJS, mas no geral eles são insanamente poderosos para transformar dados, e vão te ajudar muito no seu workflow de trabalho." /><meta property="og:description" content="Filtros são mal compreendidos no universo AngularJS, mas no geral eles são insanamente poderosos para transformar dados, e vão te ajudar muito no seu workflow de trabalho." /><link rel="canonical" href="http://localhost:4000/Delete/2017-04-21-angular-criando-filtros-customizados/" /><meta property="og:url" content="http://localhost:4000/Delete/2017-04-21-angular-criando-filtros-customizados/" /><meta property="og:site_name" content="Sinisha Stojchevski" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="AngularJS: Criando filtros customizados e além" /><meta name="twitter:site" content="@RafaellLycan" /><meta name="twitter:creator" content="@Sinisha Stojchevski" /><meta property="fb:app_id" content="1160764874037367" /><meta name="google-site-verification" content="k0stkb4kdmJ6rf6o_WvHllT9IC4NGb6CpZC8BUvsUrA" /> <script type="application/ld+json"> {"@type":"WebPage","headline":"AngularJS: Criando filtros customizados e além","author":{"@type":"Person","name":"Sinisha Stojchevski"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/icons/favicon-192x192.png"},"name":"Sinisha Stojchevski"},"url":"http://localhost:4000/Delete/2017-04-21-angular-criando-filtros-customizados/","description":"Filtros são mal compreendidos no universo AngularJS, mas no geral eles são insanamente poderosos para transformar dados, e vão te ajudar muito no seu workflow de trabalho.","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --><meta name="twitter:card" content="summary" /><meta property="og:image" content="http://localhost:4000/assets/images/me.jpg"><meta name="twitter:image" content="http://localhost:4000/assets/images/me.jpg"><meta name="msapplication-tap-highlight" content="no"><meta name="mobile-web-app-capable" content="yes"><meta name="application-name" content=""><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="apple-mobile-web-app-title" content=""><meta name="msapplication-TileColor" content="#5fbffd"><meta name="theme-color" content="#5fbffd"><meta name="msapplication-TileImage" content="/assets/icons/icon-144x144.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/icon-192x192.png"><link rel="icon" type="image/png" sizes="128x128" href="/assets/icons/icon-128x128.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/icon-96x96.png"><link rel=apple-touch-icon sizes="128x128" href="/assets/icons/icon-128x128.png"><link rel=apple-touch-icon-precomposed sizes="144x144" href="/assets/icons/icon-144x144.png"> <!-- DNS Pre-fetch & Preconnect --> <!-- Domain --><link rel="dns-prefetch" href=""> <!-- Google CDN --><link rel="dns-prefetch preconnect" href="//ajax.googleapis.com" crossorigin><link rel="dns-prefetch preconnect preload" as="script" href="//fonts.googleapis.com" crossorigin><link rel="dns-prefetch preconnect" href="//fonts.gstatic.com" crossorigin><link rel="dns-prefetch preconnect" href="//google-analytics.com"><link rel="dns-prefetch preconnect" href="//www.google-analytics.com"><link rel="dns-prefetch preconnect" href="//ssl.google-analytics.com"><link rel="dns-prefetch preconnect" href="//apis.google.com" crossorigin> <!-- Facebook --><link rel="dns-prefetch preconnect" href="//connect.facebook.net"> <!-- Others --><link rel="dns-prefetch preconnect" href="//use.fontawesome.com" crossorigin><link rel="dns-prefetch preconnect" href="//s.gravatar.com" crossorigin><link rel="dns-prefetch preconnect" href="//insights.hotjar.com" crossorigin><link rel="dns-prefetch preconnect" href="//script.hotjar.com" crossorigin><link rel="dns-prefetch preconnect" href="//static.hotjar.com" crossorigin><link rel="dns-prefetch preconnect" href="//vars.hotjar.com" crossorigin><link rel="preconnect preload" as="style" href="http://localhost:4000/assets/styles/fonts.css"><link rel="preconnect preload" as="style" href="http://localhost:4000/assets/styles/main.css" onload="this.rel='stylesheet'"><link rel="preload" as="image" href="http://localhost:4000/assets/svgs/bg-elements.svg"><link rel="preload" as="script" href="http://localhost:4000/assets/scripts/main.bundle.js"><link rel="prerender" href="http://localhost:4000/offline"><style type="text/css"> /*! normalize.css v5.0.0 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1,.h1{font-size:2em;margin:0.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace, monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace, monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,html [type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}[type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}template{display:none}[hidden]{display:none}*,*:before,*:after{box-sizing:border-box}body{font:normal 300 1.125em/1.8em "Source Serif Pro",Constantia,"Lucida Bright","Lucida Serif",Lucida,"Liberation Serif",Georgia,serif;letter-spacing:0.01rem;color:#3e3e3e;background:#fff;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;background-image:url("/assets/svgs/bg-elements.svg");background-position:0 0;background-repeat:no-repeat}@media only screen and (max-width: 30rem){body{background-image:none}}img{max-width:100%;vertical-align:middle;border-radius:2px}figure{width:100%;margin:0 auto;position:relative;clear:both;outline:0;box-sizing:border-box;user-select:auto;z-index:100}figure>img{display:block;margin:0 auto}figcaption{position:relative;width:100%;left:0;top:0;color:rgba(62,62,62,0.6);outline:0;text-align:center;font-size:14px;margin:10px auto 0}h1,.h1,h2,.h2,h3,.h3,h4,.h4,h5,h6{font-family:"Montserrat","Helvetica Neue",Helvetica,Arial,sans-serif;line-height:1.2em;font-weight:700}h1 code,.h1 code,h2 code,.h2 code,h3 code,.h3 code,h4 code,.h4 code,h5 code,h6 code{font-size:.8em}h1,.h1{font-size:3rem}h2,.h2{font-size:2.25rem;margin-top:3rem}h3,.h3{font-size:1.875rem}h4,.h4{font-size:1.5rem}@media only screen and (max-width: 768px){h1,.h1{font-size:2.8rem}h2,.h2{font-size:2.2rem}}@media only screen and (max-width: 480px){h1,.h1{font-size:1.75rem}h2,.h2{font-size:1.5rem}h3,.h3{font-size:1.3rem}h4,.h4{font-size:1.125rem}}p{margin:0 0 1.875rem}b,strong{font-weight:bold}blockquote{position:relative;margin:3.75rem 0;padding:0 2.5em;text-align:center;font-style:italic;font-size:1.5rem;line-height:1.5em;color:#7a7a7a}blockquote:after,blockquote:before{position:absolute;font-size:4em;color:rgba(66,153,255,0.6);z-index:-1;font-family:'Droid Serif', georgia, serif}blockquote:after{content:"”";right:0px}blockquote:before{content:"“";left:0px}blockquote>:last-child{margin-bottom:0}hr{box-sizing:content-box;height:0;display:block;border:0;text-align:center;margin-top:50px;margin-bottom:50px}hr:before{content:'...';display:inline-block;margin-left:.6em;color:rgba(62,62,62,0.4);position:relative;top:-30px;font-size:1.8rem;letter-spacing:.6em}@media only screen and (max-width: 768px){hr{margin-top:30px;margin-bottom:30px;font-size:1.25rem;line-height:1.4}}pre,code{font-size:1em;border-radius:2px}code{font-family:"Fira Mono","monaco","Consolas","Lucida Console",monospace;font-size:1rem;letter-spacing:-0.3px;padding:1px 5px;white-space:normal}:not(pre)>code{background:#f0f3f5;border:1px solid #e4e4e4;margin:0 0.05em;padding:1px 5px;white-space:nowrap}pre{background:#f0f3f5;line-height:1.35;overflow-x:auto;margin:1.875rem 0;white-space:pre;word-wrap:normal;box-shadow:0 1px 1px rgba(62,62,62,0.12);-webkit-overflow-scrolling:touch}pre>code{border-radius:2px;color:#3d3e44;display:block;outline:none;overflow-x:auto;padding:1rem;white-space:inherit}.wrapper:after,.container:after,.clearfix:after{content:"";display:table;clear:both}.hidden{visibility:hidden;display:none}.default-list,.post-list{list-style-type:none;margin:0;padding:0}.img-rounded{border-radius:50%}.center{margin-left:auto;margin-right:auto}.text-center{text-align:center !important}.text-light{font-weight:normal}.text-base-color{color:#4299ff}a{color:#3e3e3e;border-bottom:1px solid #4299ff;text-decoration:none;transition:all 300ms ease-in-out}a:active,a:hover{color:#0f7dff;border-color:#0f7dff;outline:0}.website{display:flex;min-height:100vh;flex-direction:column}.wrapper{flex:1;padding-top:7.5rem;padding-bottom:3.75rem}@media only screen and (min-width: 48rem){.wrapper{padding-top:9.375rem;padding-bottom:5.625rem}}@media only screen and (min-width: 60rem){.wrapper{padding-top:11.25rem}}@media only screen and (min-width: 75rem){.wrapper{padding-top:13.125rem}}.container{position:relative;display:block;width:45rem;max-width:100%;margin-right:auto;margin-left:auto;padding-right:1rem;padding-left:1rem}.title-hero{margin:5.625rem 0 1.875rem;color:#4299ff;text-transform:uppercase;font-size:13px;position:relative}.title-hero:after{content:'';display:block;height:2px;width:3.125rem;margin:1.25rem 0 0;background:#4299ff}.animate{animation:fade-in-down 600ms;animation-delay:200ms}@-webkit-keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px)}100%{opacity:1;transform:translateY(0)}}@-moz-keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px)}100%{opacity:1;transform:translateY(0)}}@-ms-keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px)}100%{opacity:1;transform:translateY(0)}}@-o-keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px)}100%{opacity:1;transform:translateY(0)}}@keyframes fade-in-down{0%{opacity:0;transform:translateY(-10px)}100%{opacity:1;transform:translateY(0)}}@-webkit-keyframes fade{0%{opacity:0}60%{opacity:0}100%{opacity:1}}@-moz-keyframes fade{0%{opacity:0}60%{opacity:0}100%{opacity:1}}@-ms-keyframes fade{0%{opacity:0}60%{opacity:0}100%{opacity:1}}@-o-keyframes fade{0%{opacity:0}60%{opacity:0}100%{opacity:1}}@keyframes fade{0%{opacity:0}60%{opacity:0}100%{opacity:1}}table{width:100%;margin:30px 0;border-collapse:collapse;border-spacing:0}th,td{text-align:left;padding-right:15px;vertical-align:top}table td,td{border-spacing:none;border-style:solid;padding:10px 15px;border-width:1px 0 0 0}tr>td{border-top:1px solid #e2e2e2}tr:nth-child(odd)>td{background:#f0f3f5}thead th,th{text-align:left;padding:15px;font-weight:bold;border-bottom:1px solid #4299ff;cursor:default;white-space:nowrap}.header{position:absolute;display:flex;align-items:center;flex-wrap:wrap;justify-content:space-between;width:100%;margin-left:auto;margin-right:auto;min-height:3.75rem;z-index:4}.header a{border:none}.header .logo,.header .github{display:flex;margin:.625rem 1.25rem;align-items:center;text-decoration:none;font-weight:700;font-weight:700}@media only screen and (min-width: 48rem){.header .logo,.header .github{margin:1.875rem}}.header .github svg{width:36px;height:36px;fill:#3e3e3e;transition:all 300ms ease}.header .github:hover svg{fill:#4299ff}.main-nav{position:relative;font-family:"Montserrat","Helvetica Neue",Helvetica,Arial,sans-serif;float:right;text-align:center;flex:1;order:2;flex-basis:100%}@media only screen and (min-width: 48rem){.main-nav{order:0;flex-basis:initial}}.main-nav__list{padding:0;margin:0}.main-nav__list-item{margin:0 .625rem;list-style:none;display:inline-block}@media only screen and (min-width: 48rem){.main-nav__list-item{margin:0 1.25rem;order:0;flex-basis:initial}}.main-nav__link{position:relative;color:inherit;letter-spacing:3.8px;text-transform:uppercase;transition:all 600ms ease;font-weight:600;font-size:13px;text-decoration:none !important}.main-nav__link:after{content:'';position:absolute;display:block;height:2px;width:0;top:1.875rem;background:#4299ff;transition:all 300ms ease}.main-nav__link:hover,.main-nav__link:active,.main-nav__link--active{color:#4299ff}.main-nav__link:hover:after,.main-nav__link:active:after,.main-nav__link--active:after{width:100%}.page{position:relative;animation:fade 600ms ease}.page__header{text-align:center;padding-bottom:.625rem}.page__title{font-size:3.75rem;margin-bottom:.9375rem}.page__subtitle{font-family:"Montserrat","Helvetica Neue",Helvetica,Arial,sans-serif;color:#7a7a7a}.page--split{display:flex;justify-content:center}.page--split__column{width:50%}.homepage__intro{animation:fade 600ms ease}@media only screen and (max-width: 30rem){.homepage__title{text-align:center}}.homepage__title span{color:#4299ff}.homepage__description{font-family:"Source Serif Pro",Constantia,"Lucida Bright","Lucida Serif",Lucida,"Liberation Serif",Georgia,serif;color:gray;font-weight:normal;font-size:1.25rem;font-style:italic}@media only screen and (max-width: 30rem){.homepage__description{text-align:center}}.homepage em{color:#3e3e3e}@media only screen and (max-width: 30rem){.homepage h5{text-align:center}}.post{position:relative;padding-bottom:3.125rem}.post__header{text-align:center}.post__cover{width:auto}@media only screen and (min-width: 48rem){.post__cover{margin:3.75rem -3.75rem}}@media only screen and (min-width: 60rem){.post__cover{margin:3.75rem -5.625rem}}.post__cover img{width:100%}.post__header+.post__content{margin-top:3.75rem;padding-top:3.75rem;border-top:1px solid #e2e2e2}.post__content{position:relative;padding-bottom:3.125rem}.post__content h1 a,.post__content .h1 a,.post__content h2 a,.post__content .h2 a,.post__content h3 a,.post__content .h3 a,.post__content h4 a,.post__content .h4 a,.post__content h5 a,.post__content h6 a{border:none}.post pre{margin:1.875rem 0}@media only screen and (min-width: 48rem){.post pre{margin:3.75rem -3.75rem;padding:1.875rem}}@media only screen and (min-width: 60rem){.post pre{margin:3.75rem -5.625rem;padding:1.875rem}}.post__section-title{text-transform:uppercase;margin:0 0 3.125rem;color:#4299ff;font:700 13px "Montserrat","Helvetica Neue",Helvetica,Arial,sans-serif;letter-spacing:3.5px;text-align:center}.post__section-title:after{content:'';display:block;height:2px;width:3.125rem;margin:1.25rem auto 0;background:#4299ff}.post__progress{background:linear-gradient(to right, #4299ff var(--progress), transparent 0);background-repeat:no-repeat;position:fixed;width:100%;height:4px;top:0;z-index:102;animation:fade 600ms ease}.footer{font-size:0.8em;padding-top:2rem;background-color:#e2e2e2;font-family:"Montserrat","Helvetica Neue",Helvetica,Arial,sans-serif}.footer__content{padding-bottom:2rem;text-align:center}.btn{-webkit-appearance:none;display:inline-block;vertical-align:middle;border-bottom:1px solid #3e3e3e;cursor:pointer;margin:0;padding-bottom:1.25rem;color:#3e3e3e;font:700 13px "Montserrat","Helvetica Neue",Helvetica,Arial,sans-serif;letter-spacing:3.5px;transition:all 300ms;text-align:center;text-decoration:none;text-transform:uppercase;user-select:none;white-space:normal}.btn:hover,.btn:active{color:#4299ff;border-color:#4299ff}.info-box{font-family:"Montserrat","Helvetica Neue",Helvetica,Arial,sans-serif;padding:.9375rem;margin:1.875rem 0;background-color:rgba(247,232,79,0.25);border-left:.5rem solid rgba(247,232,79,0.6)}.info-box.warning{background-color:rgba(218,57,63,0.25);border-color:rgba(218,57,63,0.6)}.info-box.success{background-color:rgba(69,197,95,0.25);border-color:rgba(69,197,95,0.6)}.info-box.info{background-color:rgba(66,153,255,0.25);border-color:rgba(66,153,255,0.6)}.meta-tags{font-size:.8125rem;font-family:"Montserrat","Helvetica Neue",Helvetica,Arial,sans-serif;text-transform:uppercase;margin:0;padding:0}.meta-tags--center{text-align:center}.meta-tags__item{display:inline-block}.meta-tags__item:after{content:",";display:inline-block;margin-left:-.0625rem;margin-right:.3125rem}.meta-tags__item:last-child:after{display:none}.meta-tags a{color:#4299ff;border:none;font-weight:600}.post-list{margin:3.125rem 0;animation:fade 600ms ease}.post-list__item{display:block;padding:1.25rem 0;border-bottom:1px solid #e2e2e2}.post-list__item:first-child{padding-top:0}.post-list__item:last-child{border:0;padding-bottom:0}.post-list__title{margin:.9375rem 0}.post-list__link{display:block;color:#333;border:0;transition:color 300ms ease-in-out}.post-list__link:hover,.post-list__link:active{color:#4299ff}.post-list__description{margin-bottom:.9375rem}.post-list__meta{font-size:1rem;text-transform:uppercase}.post-list__meta span{margin-left:.9375rem}.post-list__meta span:before{content:'|';margin-right:.9375rem}.post-list__meta--center{text-align:center}</style><link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@400;700&family=Playfair+Display:ital@0;1&display=swap" rel="stylesheet"><body class="website"><header class="header "> <a href="/" class="logo"> <img src="/assets/svgs/logo.svg" width="26px" alt="Sinisha Stojchevski"> </a><nav class="main-nav"><ul class="main-nav__list"><li class="main-nav__list-item"> <a href="/" class="main-nav__link "> Home </a><li class="main-nav__list-item"> <a href="/articles" class="main-nav__link "> Articles </a><li class="main-nav__list-item"> <a href="/about" class="main-nav__link "> About </a></ul></nav><a href="https://github.com/sini6a" target="_blank" class="github" title="GitHub"> <svg viewBox="0 0 512 512"><path d="M256 70.7c-102.6 0-185.9 83.2-185.9 185.9 0 82.1 53.3 151.8 127.1 176.4 9.3 1.7 12.3-4 12.3-8.9V389.4c-51.7 11.3-62.5-21.9-62.5-21.9 -8.4-21.5-20.6-27.2-20.6-27.2 -16.9-11.5 1.3-11.3 1.3-11.3 18.7 1.3 28.5 19.2 28.5 19.2 16.6 28.4 43.5 20.2 54.1 15.4 1.7-12 6.5-20.2 11.8-24.9 -41.3-4.7-84.7-20.6-84.7-91.9 0-20.3 7.3-36.9 19.2-49.9 -1.9-4.7-8.3-23.6 1.8-49.2 0 0 15.6-5 51.1 19.1 14.8-4.1 30.7-6.2 46.5-6.3 15.8 0.1 31.7 2.1 46.6 6.3 35.5-24 51.1-19.1 51.1-19.1 10.1 25.6 3.8 44.5 1.8 49.2 11.9 13 19.1 29.6 19.1 49.9 0 71.4-43.5 87.1-84.9 91.7 6.7 5.8 12.8 17.1 12.8 34.4 0 24.9 0 44.9 0 51 0 4.9 3 10.7 12.4 8.9 73.8-24.6 127-94.3 127-176.4C441.9 153.9 358.6 70.7 256 70.7z"></path></svg> </a> <!--<div class="menu-button"> <span class="menu-button__line"></span> <span class="menu-button__line"></span> <span class="menu-button__line"></span></div>--></header><main class="wrapper"><article class="page page--angularjs: criando filtros customizados e além"><header class="page__header container"><h1 class="alpha page__title" itemprop="name headline"> AngularJS: Criando filtros customizados e além</h1></header><div class="container"><p>Fala pessoal, tudo bem com vocês?<p>Eu estava lendo meus emails e esbarrei com 3 emails sobre dúvidas sobre algumas coisas no Angular, algumas perguntas mais avançadas onde até eu tive que dar uma olhada no StackOverflow para entender como solucionar e outras mais simples, onde creio que posso ajudar em um curto artigo.<h2 id="o-que-são-filtros-onde-vivem-e-o-que-comem">O que são Filtros, onde vivem e o que comem?</h2><p>Sei que muitos de vocês já sabem a respeito de filtros em um aplicação <a href="https://angularjs.org/">AngularJS</a>. Apesar deste tópico não ser avançado, acho que vale a leitura, mesmo que superficialmente.<p>Sabe quando você precisa formatar algum dado para exibí-lo ao usuário? O Angular já possui alguns filtros built-in como <code class="language-plaintext highlighter-rouge">currency</code>, <code class="language-plaintext highlighter-rouge">date</code> e outros. São muito úteis em uma aplicação. Vamos a uma breve descrição<blockquote><p>Transformam o resultado de uma expressão, realizando operações como formato de data, conversão de moeda e ordenação de arrays.<ul><li>Rodrigo Branas</ul></blockquote><h2 id="anatomia-de-filtros-em-angularjs">Anatomia de Filtros em AngularJS</h2><p>Segundo a <a href="https://docs.angularjs.org/guide/filter#creating-custom-filters">API para criação de filtros customizados</a>, não tem nada diferente do que já fazemos com um controller ou serviço, por exemplo.<p>Utilizamos <code class="language-plaintext highlighter-rouge">app.filter(filterName, function(){})</code>, o que é um padrão que utilizamos em todas as APIs até o momento.<p>Um filtro tem uma declaração bem próxima de um <code class="language-plaintext highlighter-rouge">.factory()</code> por exemplo mas com a vantagem de possuir um <strong>escopo global</strong> quando criado.<p>Vamos a um exemplo de código:<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">myAwesomeApp</span><span class="dl">'</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="dl">'</span><span class="s1">customFilter</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="nx">param1</span><span class="p">,</span> <span class="nx">param2</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">newValue</span><span class="p">;</span>
      <span class="c1">// Funcionalidade do filtro</span>
      <span class="k">return</span> <span class="nx">newValue</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div><p>Vamos analisar alguns pontos:<ol><li>Fizemos un <code class="language-plaintext highlighter-rouge">get</code> no módulo <code class="language-plaintext highlighter-rouge">myAwesomeApp</code> e depois utilizamos o serviço <code class="language-plaintext highlighter-rouge">filter()</code> para declarar um novo filtro customizado.<li>O primeiro parâmetro é o nome do filtro, que no nosso caso é <code class="language-plaintext highlighter-rouge">'customFilter'</code>, e depois uma função que retorna uma função, que na verdade é o funcionamento do nosso filtro.<li>A função de retorno recebe por padrão o <code class="language-plaintext highlighter-rouge">input</code> que é o dado a ser filtrado e pode também receber parâmetros opcionais que retorna o output desejado seja ele uma string, um array com uma nova ordenação, um cálculo, etc.</ol><p>Para utilizarmos este filtro, seria preciso invoca-lo como <code class="language-plaintext highlighter-rouge">{{ value | customFilter: arg1:arg2...}}</code>.<p>Legal? Não, né? Até agora de fato não estamos vendo nada útil.<p>Antes de falarmos de coisas legais sobre filtros, vamos fazer um exemplo que realmente funcione:<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">myAwesomeApp</span><span class="dl">'</span><span class="p">,</span> <span class="p">[])</span>
  <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="dl">'</span><span class="s1">reverse</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Retorna o valor reverso basedo em uma string</span>
      <span class="k">return</span> <span class="nx">input</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">''</span><span class="p">).</span><span class="nx">reverse</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span></code></pre></figure><p>Agora podemos utilizar este filtro facilmente através de <code class="language-plaintext highlighter-rouge">{{ 'Rafaell' | reverse}}</code> e o output renderizado na expressão será <strong>lleafaR</strong>.<p>Vamos utilizar algumas boas práticas para deixar o mesmo código melhor, levando em conta que o módulo foi declarado em um outro arquivo e estamos criando nosso <code class="language-plaintext highlighter-rouge">reverse.filter.js</code>:<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// file reverse.filter.js</span>
<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span><span class="p">;</span>
  
  <span class="nx">angular</span>
    <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">myAwesomeApp</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// get module</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="dl">'</span><span class="s1">reverse</span><span class="dl">'</span><span class="p">,</span> <span class="nx">reverseFilter</span><span class="p">);</span>
  
  <span class="kd">function</span> <span class="nx">reverseFilter</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Retorna o valor reverso basedo em uma string</span>
      <span class="k">return</span> <span class="nx">input</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">''</span><span class="p">).</span><span class="nx">reverse</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})();</span></code></pre></figure><p>Apenas isolamos o código em uma closure, fizemos o <code class="language-plaintext highlighter-rouge">get</code> no módulo <code class="language-plaintext highlighter-rouge">myAwesomeApp</code> declarado em algum arquivo anterior e passamos a função <code class="language-plaintext highlighter-rouge">reverseFilter</code> como segundo parâmetro para nosso filtro.<p>Caso você esteja utilizando ES6 (Babel/TypeScript) o mesmo código poderia ser escrito da seguinte maneira:<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// file reverse.filter.js</span>
<span class="kd">const</span> <span class="nx">reverseFilter</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> 
  <span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">input</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="dl">''</span><span class="p">).</span><span class="nx">reverse</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span>
  
  <span class="nx">angular</span>
    <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">myAwesomeApp</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// get module</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="dl">'</span><span class="s1">reverse</span><span class="dl">'</span><span class="p">,</span> <span class="nx">reverseFilter</span><span class="p">);</span></code></pre></figure><p>Lembrando que é possível injetar o serviço <code class="language-plaintext highlighter-rouge">$filter</code> em um controller ou service, é interessante analisar que com um simples filtro podemos por exemplo validar se uma palavra é um <a href="https://en.wikipedia.org/wiki/Palindrome">palíndromo</a> ou não.<p>Quanto aos parâmetros opcionais, poderiamos criar um filtro <code class="language-plaintext highlighter-rouge">'ellipsis'</code> que adiciona um texto com mais de <strong>x</strong> caracteres onde podemos informar através de um parâmetro opcional o tamanho máximo do texto.<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// file ellipsis.filter.js</span>
<span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span><span class="p">;</span>
  
  <span class="nx">angular</span>
    <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">myAwesomeApp</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// get module</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="dl">'</span><span class="s1">ellipsis</span><span class="dl">'</span><span class="p">,</span> <span class="nx">ellipsisFilter</span><span class="p">);</span>
  
  <span class="kd">function</span> <span class="nx">ellipsisFilter</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">size</span> <span class="o">=</span> <span class="nx">size</span> <span class="o">||</span> <span class="mi">10</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="nx">size</span><span class="p">)</span> <span class="k">return</span> <span class="nx">input</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">input</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">size</span><span class="p">)}</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">...</span><span class="dl">'</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})();</span></code></pre></figure><p>O mesmo código com ES6:<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// file ellipsis.filter.js</span>
<span class="kd">const</span> <span class="nx">ellipsisFilter</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span>
  <span class="p">(</span><span class="nx">input</span><span class="p">,</span> <span class="nx">size</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">input</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;=</span> <span class="nx">size</span><span class="p">)</span> <span class="k">return</span> <span class="nx">input</span><span class="p">;</span>
    <span class="k">return</span> <span class="s2">`</span><span class="p">${</span><span class="nx">input</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">size</span><span class="p">)}</span><span class="s2">...`</span><span class="p">;</span>
  <span class="p">}</span>
  
<span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">myAwesomeApp</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// get module</span>
  <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="dl">'</span><span class="s1">ellipsis</span><span class="dl">'</span><span class="p">,</span> <span class="nx">ellipsisFilter</span><span class="p">);</span></code></pre></figure><p>Este filtro pode ser utilizado com ou sem o parâmetro opcional, já que o informamos um valor default de <strong>10</strong> caso nada seja informado.<p>Filtro: <code class="language-plaintext highlighter-rouge">{{ 'Lorem ipsum dolor sit amet' | ellipsis }}</code> Output: <code class="language-plaintext highlighter-rouge">Lorem ipsu...</code><p>Filtro: <code class="language-plaintext highlighter-rouge">{{ 'Lorem ipsum dolor sit amet' | ellipsis : 20 }}</code> Output: <code class="language-plaintext highlighter-rouge">Lorem ipsum dolor si...</code><h2 id="filtros-aninhados">Filtros Aninhados</h2><p>Uma nota adicional sobre filtros é que você pode utilizá-los aninhados de maneira muito simples com nossos pipes (<code class="language-plaintext highlighter-rouge">|</code>), sempre lembrando que são utilizados da esquerda para direita.<p><code class="language-plaintext highlighter-rouge">{{ 'Rafaell' | lowercase | reverse | ellipsis }}</code><p>Nesse caso o texto é transformado em <strong>lowercase</strong>, depois o valor será revertido com <strong>reverse</strong> e por fim será aplicado <strong>ellipsis</strong>.<h2 id="filtros-stateful">Filtros Stateful</h2><p>Desde a versão 1.3 todos os filtros são <strong>stateless</strong> por padrão, assim se o <strong>input</strong> não foi modificado, então o resultado será o mesmo, isso faz que o <strong>$digest cycle</strong> não seja execute o filtro toda vez que algo mude no escopo da sua aplicação.<p>Na própria documentação é sugerido evitar a escrita de filtros <strong>stateful</strong> justamente por questões de performance que não podem ser otimizadas, e para fazer isso funcionar, o Angular assume que se a expressão informada para o filtro não seja modificada, o valor do filtro também permanecerá o mesmo. Isso é <strong>statelesss</strong>. Pensando que em alguns casos onde nossos filtros dependem de serviços para formatar o <strong>output</strong>.<p>Pensando em um cenário real, vamos dar uma olhada no filtro <code class="language-plaintext highlighter-rouge">translate</code> que pertence ao módulo <a href="https://angular-translate.github.io/">angular-translate</a>. Ele funciona através de <strong>chaves</strong> informados para procura-los em uma tabela de tradução carregada junto a aplicação, e caso nada seja encontrado, retorna a mesma chave utilizando o serviço <code class="language-plaintext highlighter-rouge">$translate</code>.<p><strong>Isso é stateful.</strong><p>Vejamos o uso deste filtro:<figure class="highlight"><pre><code class="language-html" data-lang="html">{{ 'TRANSLATION_KEY' | translate }}</code></pre></figure><p>Pensando neste contexto, Angular cria um cache sobre o valor da expressão e não modifica o valor do output a não seja que a chave <code class="language-plaintext highlighter-rouge">'TRANSLATION_KEY'</code> seja alterada.<p>E este é o problema, porque <code class="language-plaintext highlighter-rouge">'TRANSLATION_KEY'</code> nunca irá ser modificado. Imagine que o usuário modifica o idioma da página, utilizando a mesma <strong>chave</strong> que deveria checar na tebela de traduções, etc… porém, o valor gerado irá permanecer o mesmo justamente pelo fato dos filtros serem <strong>stateless</strong>.<p>Então como informamos ao Angular que as expressões passadas para nossos filtros devem ser recalculadas?<p>Tudo o que precisamos fazer é adicionar uma propriedade <code class="language-plaintext highlighter-rouge">$stateful</code> em nossa função antes de retorna-la.<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span><span class="p">;</span>
  
  <span class="nx">angular</span>
    <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">myAwesomeApp</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// get module</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="dl">'</span><span class="s1">customFilter</span><span class="dl">'</span><span class="p">,</span> <span class="nx">customFilter</span><span class="p">);</span>
  
  <span class="c1">// Inject customService on the filter</span>
  <span class="nx">customFilter</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">customService</span><span class="dl">'</span><span class="p">];</span>
  <span class="kd">function</span> <span class="nx">customFilter</span><span class="p">(</span><span class="nx">customService</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">filter</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Change input with some value from customService</span>
      <span class="k">return</span> <span class="nx">input</span> <span class="o">+=</span> <span class="nx">customService</span><span class="p">.</span><span class="nx">getData</span><span class="p">();</span>
    <span class="p">}</span>
    
    <span class="nx">filter</span><span class="p">.</span><span class="nx">$stateful</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    
    <span class="k">return</span> <span class="nx">filter</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">})();</span></code></pre></figure><p>Isso é tudo.<p>Claro que isso não acontece com o módulo <strong>angular-translate</strong>, já que ele possui uma flag <code class="language-plaintext highlighter-rouge">statefulFilter = true</code> que força o filtro a ser <strong>stateful</strong> por padrão.<h2 id="resposta-ao-leitor">Resposta ao leitor:</h2><p>Recebi um email do William Silveira com uma dúvida sobre como criar um filtro que calcula há quanto tempo uma mensagem foi enviada. Esse cálculo pode ser feito utilizando bibliotecas como <a href="https://momentjs.com/">moment.js</a>.<p>Um simples exemplo de como resolver este problema seria:<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="dl">'</span><span class="s1">use strict</span><span class="dl">'</span><span class="p">;</span>
  
  <span class="nx">angular</span>
    <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">myAwesomeApp</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// get module</span>
    <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="dl">'</span><span class="s1">timeAgo</span><span class="dl">'</span><span class="p">,</span> <span class="nx">timeAgo</span><span class="p">);</span>
  
  <span class="kd">function</span> <span class="nx">timeAgo</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">moment</span><span class="p">(</span><span class="nx">input</span><span class="p">).</span><span class="nx">fromNow</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">})();</span></code></pre></figure><p>A mesma implementação em ES6:<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="k">import</span> <span class="nx">moment</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">moment</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">timeAgo</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> 
  <span class="p">(</span><span class="nx">input</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">moment</span><span class="p">(</span><span class="nx">input</span><span class="p">).</span><span class="nx">fromNow</span><span class="p">();</span>
  
<span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="dl">'</span><span class="s1">myAwesomeApp</span><span class="dl">'</span><span class="p">)</span> <span class="c1">// get module</span>
  <span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="dl">'</span><span class="s1">timeAgo</span><span class="dl">'</span><span class="p">,</span> <span class="nx">timeAgo</span><span class="p">);</span></code></pre></figure><p>E a utilização seria assim: <code class="language-plaintext highlighter-rouge">{{ date | timeAgo }}</code>.<h2 id="conclusão">Conclusão</h2><p>É importante sabermos que os filtros pode ser ferramentas poderosas para extender a apresentação de nossas aplicações e facilitar nosso trabalho. Tenha em mente que é uma recomendação evitar a criação de filtros <strong>stateful</strong>, justamente por conta de performance da sua aplicação. Uma melhor abordagem é sempre manter seus filtros <strong>stateless</strong> que recebem parâmetros.<p>Você pode ver todos os exemplos desenvolvidos no <a href="http://codepen.io/rafaell-lycan/full/GWVQOq/">CodePen</a>.<p>Sei que para quem já esta trabalhando com AngularJS a algum tempo, talvez este post não seja tão útil, mas espero poder ajudar pessoas com esse tipo de conteúdo.<p>Também gostaria de agradecer a <a href="https://twitter.com/marinalimeira_">@marinalimeira_</a> pela revisão :)<p>Até mais.</div></article></main><footer class="footer"><div class="container"><div class="footer__content"><div class="rule"></div>&copy; Copyright 2020<br> Sinisha Stojchevski</div></div></footer><script src="http://localhost:4000/assets/scripts/main.bundle.js"></script> <script type="text/javascript" defer="defer"> if( 'serviceWorker' in navigator && location.hostname !== 'localhost'){ navigator.serviceWorker.register('/sw3.js') .then(reg => console.log('Service Worker magic! ❤️')) .catch(err => console.log('Service Worker failed to register 😔', err)); } </script> <!-- Google Tag Manager (noscript) --> <noscript> <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KPNJ6BB" height="0" width="0" style="display:none;visibility:hidden"> </iframe> </noscript> <!-- End Google Tag Manager (noscript) -->